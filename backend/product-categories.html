<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>產品分類管理 - 後台管理系統</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link href="css/admin.css" rel="stylesheet" />
</head>
<body>
<div class="admin-container">
    <!-- Sidebar -->
    <nav class="admin-sidebar">
        <div class="sidebar-header">
            <a href="dashboard.html" class="sidebar-brand">
                <i class="fas fa-leaf"></i> 蔬果管理系統
            </a>
        </div>
        <div class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">主要功能</div>
                <div class="nav-item"><a href="dashboard.html" class="nav-link"><i class="fas fa-tachometer-alt"></i> 儀表板</a></div>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">產品管理</div>
                <div class="nav-item"><a href="products.html" class="nav-link"><i class="fas fa-box"></i> 產品列表</a></div>
                <div class="nav-item"><a href="product-categories.html" class="nav-link active"><i class="fas fa-tags"></i> 產品分類</a></div>
                <div class="nav-item"><a href="inventory.html" class="nav-link"><i class="fas fa-warehouse"></i> 庫存管理</a></div>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">內容管理</div>
                <div class="nav-item"><a href="news.html" class="nav-link"><i class="fas fa-newspaper"></i> 最新消息</a></div>
                <div class="nav-item"><a href="blog.html" class="nav-link"><i class="fas fa-blog"></i> 部落格文章</a></div>
                <div class="nav-item"><a href="pages.html" class="nav-link"><i class="fas fa-file-alt"></i> 頁面管理</a></div>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">訂單與客戶</div>
                <div class="nav-item"><a href="orders.html" class="nav-link"><i class="fas fa-shopping-cart"></i> 訂單列表</a></div>
                <div class="nav-item"><a href="customers.html" class="nav-link"><i class="fas fa-users"></i> 客戶管理</a></div>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">系統</div>
                <div class="nav-item"><a href="settings.html" class="nav-link"><i class="fas fa-cog"></i> 系統設定</a></div>
            </div>
        </div>
    </nav>
    <!-- Main -->
    <main class="admin-main">
        <header class="admin-header">
            <div class="header-left">
                <button class="sidebar-toggle"><i class="fas fa-bars"></i></button>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="dashboard.html">首頁</a></li>
                        <li class="breadcrumb-item">產品管理</li>
                        <li class="breadcrumb-item active" aria-current="page">產品分類</li>
                    </ol>
                </nav>
            </div>
            <div class="header-right">
                <div class="header-search">
                    <input type="text" class="form-control" placeholder="搜尋分類...">
                    <i class="fas fa-search"></i>
                </div>
                <img src="images/person-admin.jpg" class="user-avatar" alt="管理員" />
            </div>
        </header>
        <div class="admin-content">
            <div class="content-header d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="page-title">產品分類管理</h1>
                    <p class="page-description">建立與維護產品分類階層</p>
                </div>
                <div class="d-flex gap-2">
                    <button class="btn-admin btn-outline" onclick="exportCategories()"><i class="fas fa-download"></i> 匯出分類</button>
                    <button class="btn-admin btn-primary" data-modal-target="addCategoryModal"><i class="fas fa-plus"></i> 新增分類</button>
                </div>
            </div>
            <!-- Category Tree & List -->
            <div class="row g-4">
                <div class="col-lg-4">
                    <div class="admin-card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h3 class="card-title">分類階層</h3>
                            <button class="btn-admin btn-sm btn-outline" onclick="refreshTree()"><i class="fas fa-sync"></i> 更新</button>
                        </div>
                        <div class="card-body category-tree">
                            <ul class="list-unstyled mb-0" id="categoryTree">
                                <li>
                                    <div class="d-flex align-items-center gap-2">
                                        <i class="fas fa-folder-open text-warning"></i>
                                        <span class="fw-semibold">蔬菜</span>
                                        <span class="badge bg-success">12</span>
                                    </div>
                                    <ul class="ms-4 list-unstyled mt-1">
                                        <li class="py-1 d-flex align-items-center gap-2">
                                            <i class="far fa-folder text-muted"></i> 葉菜類 <span class="badge bg-secondary">5</span>
                                        </li>
                                        <li class="py-1 d-flex align-items-center gap-2">
                                            <i class="far fa-folder text-muted"></i> 根莖類 <span class="badge bg-secondary">4</span>
                                        </li>
                                        <li class="py-1 d-flex align-items-center gap-2">
                                            <i class="far fa-folder text-muted"></i> 其他蔬菜 <span class="badge bg-secondary">3</span>
                                        </li>
                                    </ul>
                                </li>
                                <li class="mt-2">
                                    <div class="d-flex align-items-center gap-2">
                                        <i class="fas fa-folder-open text-warning"></i>
                                        <span class="fw-semibold">水果</span>
                                        <span class="badge bg-success">9</span>
                                    </div>
                                    <ul class="ms-4 list-unstyled mt-1">
                                        <li class="py-1 d-flex align-items-center gap-2"><i class="far fa-folder text-muted"></i> 熱帶水果 <span class="badge bg-secondary">3</span></li>
                                        <li class="py-1 d-flex align-items-center gap-2"><i class="far fa-folder text-muted"></i> 漿果類 <span class="badge bg-secondary">2</span></li>
                                        <li class="py-1 d-flex align-items-center gap-2"><i class="far fa-folder text-muted"></i> 柑橘類 <span class="badge bg-secondary">4</span></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="admin-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h3 class="card-title">分類列表</h3>
                            <div class="d-flex gap-2">
                                <button class="btn-admin btn-sm btn-outline" onclick="bulkEnable()"><i class="fas fa-check"></i> 啟用</button>
                                <button class="btn-admin btn-sm btn-outline" onclick="bulkDisable()"><i class="fas fa-ban"></i> 停用</button>
                                <button class="btn-admin btn-sm btn-outline" onclick="bulkDelete()"><i class="fas fa-trash"></i> 刪除</button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="admin-table mb-0">
                                    <thead>
                                        <tr>
                                            <th width="40"><input type="checkbox" class="form-check-input" id="selectAllCats"></th>
                                            <th>分類名稱</th>
                                            <th width="120">代碼</th>
                                            <th width="120">父層分類</th>
                                            <th width="100">狀態</th>
                                            <th width="140">操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="categoryTableBody">
                                        <tr>
                                            <td><input type="checkbox" class="form-check-input"></td>
                                            <td>
                                                <div class="fw-semibold">葉菜類</div>
                                                <div class="small text-muted">綠色葉菜類作物</div>
                                            </td>
                                            <td><span class="small text-monospace">VEG_LEAF</span></td>
                                            <td>蔬菜</td>
                                            <td><span class="status-badge active">啟用</span></td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="btn-admin btn-sm btn-warning" onclick="openEditCategory('葉菜類')"><i class="fas fa-edit"></i></button>
                                                    <button class="btn-admin btn-sm btn-outline" onclick="duplicateCategory('葉菜類')"><i class="fas fa-copy"></i></button>
                                                    <button class="btn-admin btn-sm btn-danger" onclick="deleteCategory('葉菜類')"><i class="fas fa-trash"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><input type="checkbox" class="form-check-input"></td>
                                            <td>
                                                <div class="fw-semibold">根莖類</div>
                                                <div class="small text-muted">地下塊根、塊莖類蔬菜</div>
                                            </td>
                                            <td><span class="small text-monospace">VEG_ROOT</span></td>
                                            <td>蔬菜</td>
                                            <td><span class="status-badge active">啟用</span></td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="btn-admin btn-sm btn-warning" onclick="openEditCategory('根莖類')"><i class="fas fa-edit"></i></button>
                                                    <button class="btn-admin btn-sm btn-outline" onclick="duplicateCategory('根莖類')"><i class="fas fa-copy"></i></button>
                                                    <button class="btn-admin btn-sm btn-danger" onclick="deleteCategory('根莖類')"><i class="fas fa-trash"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><input type="checkbox" class="form-check-input"></td>
                                            <td>
                                                <div class="fw-semibold">漿果類</div>
                                                <div class="small text-muted">草莓、藍莓等漿果</div>
                                            </td>
                                            <td><span class="small text-monospace">FRUIT_BERRY</span></td>
                                            <td>水果</td>
                                            <td><span class="status-badge active">啟用</span></td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="btn-admin btn-sm btn-warning" onclick="openEditCategory('漿果類')"><i class="fas fa-edit"></i></button>
                                                    <button class="btn-admin btn-sm btn-outline" onclick="duplicateCategory('漿果類')"><i class="fas fa-copy"></i></button>
                                                    <button class="btn-admin btn-sm btn-danger" onclick="deleteCategory('漿果類')"><i class="fas fa-trash"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="text-muted small">顯示 1-3 項，共 21 項</div>
                                <div class="pagination">
                                    <a href="#" class="page-btn active">1</a>
                                    <a href="#" class="page-btn">2</a>
                                    <a href="#" class="page-btn">3</a>
                                    <a href="#" class="page-btn">4</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- 新增分類 Modal -->
<div id="addCategoryModal" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width:600px;">
        <div class="modal-header">
            <h3 class="modal-title">新增分類</h3>
            <button type="button" class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
            <form id="addCategoryForm">
                <div class="mb-3">
                    <label class="form-label">分類名稱</label>
                    <input type="text" class="form-control" required />
                </div>
                <div class="mb-3">
                    <label class="form-label">分類代碼</label>
                    <input type="text" class="form-control" required />
                </div>
                <div class="mb-3">
                    <label class="form-label">父層分類</label>
                    <select class="form-select">
                        <option value="">(無，作為頂層)</option>
                        <option>蔬菜</option>
                        <option>水果</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">描述</label>
                    <textarea class="form-control" rows="3"></textarea>
                </div>
                <div class="form-check form-switch mb-3">
                    <input class="form-check-input" type="checkbox" id="catActive" checked />
                    <label class="form-check-label" for="catActive">啟用此分類</label>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-admin btn-outline modal-close">取消</button>
            <button type="button" class="btn-admin btn-primary" onclick="saveCategory()"><i class="fas fa-save"></i> 保存</button>
        </div>
    </div>
</div>

<!-- 編輯分類 Modal -->
<div id="editCategoryModal" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width:600px;">
        <div class="modal-header">
            <h3 class="modal-title">編輯分類</h3>
            <button type="button" class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
            <form id="editCategoryForm">
                <div class="mb-3">
                    <label class="form-label">分類名稱</label>
                    <input type="text" class="form-control" id="editCategoryName" />
                </div>
                <div class="mb-3">
                    <label class="form-label">分類代碼</label>
                    <input type="text" class="form-control" id="editCategoryCode" />
                </div>
                <div class="mb-3">
                    <label class="form-label">父層分類</label>
                    <select class="form-select" id="editParent">
                        <option value="">(無)</option>
                        <option>蔬菜</option>
                        <option>水果</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">描述</label>
                    <textarea class="form-control" id="editDesc" rows="3"></textarea>
                </div>
                <div class="form-check form-switch mb-3">
                    <input class="form-check-input" type="checkbox" id="editActive" />
                    <label class="form-check-label" for="editActive">啟用</label>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-admin btn-outline modal-close">取消</button>
            <button type="button" class="btn-admin btn-primary" onclick="updateCategory()"><i class="fas fa-save"></i> 更新</button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/admin.js"></script>
<script>
function openEditCategory(name){
  // Demo 邏輯：填入假資料
  document.getElementById('editCategoryName').value = name;
  document.getElementById('editCategoryCode').value = name === '葉菜類' ? 'VEG_LEAF' : 'TEMP_CODE';
  document.getElementById('editDesc').value = name + ' 的描述範例';
  document.getElementById('editActive').checked = true;
  document.getElementById('editCategoryModal').style.display = 'flex';
}
function saveCategory(){alert('已保存新分類 (示範)');document.getElementById('addCategoryModal').style.display='none';}
function updateCategory(){alert('已更新分類 (示範)');document.getElementById('editCategoryModal').style.display='none';}
function deleteCategory(name){if(confirm('確定刪除分類: '+name+' ?')){alert('已刪除 (示範)');}}
function duplicateCategory(name){alert('已複製分類: '+name+' (示範)');}
function exportCategories(){alert('匯出分類資料 (示範)');}
function bulkEnable(){alert('批次啟用 (示範)');}
function bulkDisable(){alert('批次停用 (示範)');}
function bulkDelete(){alert('批次刪除 (示範)');}
function refreshTree(){alert('更新分類樹 (示範)');}
</script>
</body>
</html>